<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Idéias sobre desenvolvimento iOS">

    <title>UIKeyCommand: Teclas de atalho dentro do seu app - iDeas</title>

    <link rel="canonical" href="http://nobre84.github.io/open-source/2016/03/05/uikeycommand-teclas-de-atalho-dentro-do-seu-app/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
    
    <!-- Share CSS -->
    <link rel="stylesheet" href="/css/share.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://nobre84.github.io/feed.xml" title="" />

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74878752-1', 'auto');
  ga('send', 'pageview');

</script>
</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">iDeas</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
				
                <li>
                    <a href="/about/">Sobre</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/dougfischer/header.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>UIKeyCommand: Teclas de atalho dentro do seu app</h1>
                    
                    <span class="meta">Postado por Douglas Fischer em 5/03/2016</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="share">
  <li><a href="https://twitter.com/intent/tweet?text=UIKeyCommand: Teclas de atalho dentro do seu app&url=http://nobre84.github.io/open-source/2016/03/05/uikeycommand-teclas-de-atalho-dentro-do-seu-app/" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fa fa-twitter-square"></i></a></li>
  <li><a href="https://facebook.com/sharer.php?u=http://nobre84.github.io/open-source/2016/03/05/uikeycommand-teclas-de-atalho-dentro-do-seu-app/" rel="nofollow" target="_blank" title="Share on Facebook"><i class="fa fa-facebook-square"></i></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=http://nobre84.github.io/open-source/2016/03/05/uikeycommand-teclas-de-atalho-dentro-do-seu-app/" rel="nofollow" target="_blank" title="Share on Linkedlin"><i class="fa fa-linkedin-square"></i></a></li>
  <li><a href="https://plus.google.com/share?url=http://nobre84.github.io/open-source/2016/03/05/uikeycommand-teclas-de-atalho-dentro-do-seu-app/" rel="nofollow" target="_blank" title="Share on Google+"><i class="fa fa-google-plus-square"></i></a></li>
</ul>
                
				<blockquote>
  <p>Douglas Fischer (<a href="https://twitter.com/DougDiskin" target="_blank">@DougDiskin</a>) começou a desenvolver para iOS desde que ele ainda se chamava iPhoneOS. Ao passar dos anos trabalhou em diversos projetos para grandes empresas da Fortune 500 e hoje é Tech Lead Mobile e um dos sócios da Abacomm. Douglas se acha tão importante que escreveu todo esse parágrafo em terceira pessoa.</p>
</blockquote>

<p>Quando a Apple apresentou o primeiro iPhone ao mundo, pelas mãos de Steve Jobs, não foi pouca a quantidade de pessoas que correram para falar que algo sem um teclado físico jamais poderia ser levado a sério. Steve Ballmer que o diga!</p>

<center><img src="/img/dougfischer/ballmer.jpg" /></center>

<p>Algum tempo depois o aparelho já era uma febre e todos adoravam seus displays com touchscreen. Aí veio o iPad!</p>

<p>O iPad ficava naquele meio termo, entre a mobilidade de um celular e a robustez de um computador ou notebook. As pessoas pareciam não entender em qual cenário ele de fato seria útil.</p>

<p>Anos se passaram e já é consenso que as pessoas de fato se acostumaram com esses dispositivos com seus teclados virtuais, seja no aparelho que for. De fato, parece que em alguns casos até esquecemos que atualmente é possível usar teclados físicos, externos, junto ao iPhone ou iPad.</p>

<p>O uso de teclados físicos (via Bluetooth) é algo presente no dia a dia de milhares de usuários iOS ao redor do mundo. Mas será que você está dando atenção para esses usuários?</p>

<h3 id="mas-tem-algum-usando">Mas tem alguém usando?</h3>

<p>Se você está por aqui lendo esse artigo, as chances de você ser envolvido de alguma forma como o mundo de desenvolvimento de apps é gigante.</p>

<p>Nós somos desenvolvedores, pessoas que estão sempre com um computador por perto. Talvez para você, não faça sentido o uso de um teclado físico no iPad porque você está sempre a poucos segundos de um computador, com teclado, mouse e tudo mais necessário para uma boa usabilidade.</p>

<p>Porém as pessoas comuns, os seus usuários, nem sempre estão em situação similar.</p>

<center><img src="/img/dougfischer/ipadpro.png" /></center>

<p>A verdade é que as pessoas estão cada vez mais distantes de computadores. Muitos até deixaram de possuir um computador em casa. O primeiro acesso a internet de milhões de pessoas na grande maioria das vezes é através de um smartphone ou tablet.</p>

<p>Há algum tempo eu parei para pesquisar no Twitter se muita gente usava teclados externos com seus iPads e o número de resultados positivos me surpreendeu muito. É um público que você com certeza vai querer tratar com carinho.</p>

<h3 id="ok-o-que-eu-preciso-fazer-achei-que-o-ios-cuidava-disso-pra-mim">OK! O que eu preciso fazer? Achei que o iOS cuidava disso pra mim.</h3>

<p>No que se refere a texto, o iOS garante que todas as metas estão sendo cumpridas (e eventualmente dobradas). A Apple cuida de tudo isso para você. Basta tratar os campos de input como você já faz para o teclado virtual.</p>

<p>Agora convenhamos, isso é muito pouco perto do que podemos fazer.</p>

<p>Desde o iOS 7, já é possível implementar atalhos de teclado dentro dos seus apps. Eles ficam a seu critério. São capazes de realizar qualquer coisa dentro do seu aplicativo.</p>

<h3 id="quando-devo-implementar">Quando devo implementar?</h3>

<p>As situações onde você pode usar atalhos de teclado ao seu favor são muitas.</p>

<ul>
  <li>
    <p>Se seu app mantém registros de alguma informação você pode usar atalhos para inserir um novo registro no seu app. O mais famoso é o <code class="highlighter-rouge">CMD + N</code>.</p>
  </li>
  <li>
    <p>Navegar entre conteúdos do seu app, mostrando o próximo registro ao pressionar para a direita.</p>
  </li>
  <li>
    <p>Salvar com <code class="highlighter-rouge">CMD + S</code>. Descartar com <code class="highlighter-rouge">CMD + Delete</code>.</p>
  </li>
  <li>
    <p>Fechar um Modal com a tecla <code class="highlighter-rouge">ESC</code>.</p>
  </li>
  <li>
    <p>Navegar entre uma infinidade de campos de um formulário com as setas do teclado.</p>
  </li>
  <li>
    <p>Um editor de texto pode usar atalhos para texto rico. Por exempo usando <code class="highlighter-rouge">CMD + B</code> para atribuir negrito (Bold) a um texto.</p>
  </li>
  <li>
    <p>E não é só em utilitários que os atalhos tem uso. Imagine um jogo de estratégia ou RTS no iPad usando atalhos de teclado para dar velocidade ao jogador. Um atalho para criar aquele novo soldado, por exemplo. Uma troca de equipamento em um FPS usando <code class="highlighter-rouge">CMD + 1, 2, 3...</code></p>
  </li>
</ul>

<p>Os cenários são infinitos.</p>

<h3 id="me-convenceu-mas-deve-ser-dficil-implementar-isso-n-douglas">Me convenceu! Mas deve ser díficil implementar isso né, Douglas?</h3>

<p>Sim! É tão díficil quanto configurar um array e adicionar dois meros métodos ao seu <code class="highlighter-rouge">UIViewController</code>.</p>

<p>Tudo funciona em torno da classe <code class="highlighter-rouge">UIKeyCommand</code>. Uma classe bastante simples. Que possui apenas 4 propriedades para você configurar.</p>

<ul>
  <li>
    <p><strong>input</strong>: O caractere, em <code class="highlighter-rouge">NSString</code>, que você deseja reconhecer. Se você quiser uma tecla que não for texto, pode usar alguma das constantes: <code class="highlighter-rouge">UIKeyInputUpArrow</code>, <code class="highlighter-rouge">UIKeyInputDownArrow</code>, <code class="highlighter-rouge">UIKeyInputLeftArrow</code>, <code class="highlighter-rouge">UIKeyInputRightArrow</code> e <code class="highlighter-rouge">UIKeyInputEscape</code>.</p>
  </li>
  <li>
    <p><strong>modifierFlags</strong>: A tecla modificadora para esse atalho. Não sabe o que é uma tecla modificadora? É a tecla que você pressiona de forma combinada ao atalho, tipo o <code class="highlighter-rouge">CMD</code> do <code class="highlighter-rouge">CMD + N</code>.</p>

    <p>As opções disponíveis são: <code class="highlighter-rouge">UIKeyModifierShift</code>, <code class="highlighter-rouge">UIKeyModifierControl</code>, <code class="highlighter-rouge">UIKeyModifierAlternate</code>, <code class="highlighter-rouge">UIKeyModifierCommand</code>, <code class="highlighter-rouge">UIKeyModifierAlphaShift</code> e <code class="highlighter-rouge">UIKeyModifierNumericPad</code>.</p>

    <p><em>Essa última define que a tecla está no teclado número, e eu sinceramente não consigo imaginar um cenário onde você utilizaria isso dentro do iOS!</em></p>
  </li>
  <li>
    <p><strong>action</strong>: É o <code class="highlighter-rouge">@selector</code> que será chamado quando esse atalho for reconhecido. Aqui você vai apontar para o método da sua classe que de fato executa o que o atalho deve ativar.</p>
  </li>
  <li>
    <p><strong>discoverabilityTitle</strong>: Um texto opcional descrevendo o nome do atalho. Essa propriedade foi adicionada apenas no iOS 9 e já veremos porque ela é tão importante para essa funcionalidade. Aguenta aí!</p>
  </li>
</ul>

<h3 id="ok-j-conheo-a-classe-uikeycommand-como-faz-agora-estou-ficando-sem-pacincia">Ok! Já conheço a classe <code class="highlighter-rouge">UIKeyCommand</code>. Como faz agora? Estou ficando sem paciência!</h3>

<p>Vamos lá…</p>

<p>Vá até seu <code class="highlighter-rouge">UIViewController</code>, garanta que ele está habilitado para ser um <code class="highlighter-rouge">firstResponder</code> da sua aplicação.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">canBecomeFirstResponder</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Agora retorne um <code class="highlighter-rouge">NSArray</code> de <code class="highlighter-rouge">UIKeyCommand</code> no método <code class="highlighter-rouge">keyCommands</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">&lt;</span><span class="n">UIKeyCommand</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="n">keyCommands</span> <span class="p">{</span>
	<span class="k">return</span> <span class="p">@[</span>
		<span class="p">[</span><span class="n">UIKeyCommand</span> <span class="nf">keyCommandWithInput</span><span class="p">:</span><span class="s">@"N"</span> <span class="nf">modifierFlags</span><span class="p">:</span><span class="n">UIKeyModifierCommand</span> <span class="nf">action</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nf">addNewRecord</span><span class="p">:)</span> <span class="nf">discoverabilityTitle</span><span class="p">:</span><span class="s">@"Adicionar novo registro"</span><span class="p">]</span>
	<span class="p">];</span>
<span class="p">}</span>
</code></pre>
</div>

<p>E claro, certifique-se que o método que será chamado realmente existe.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addNewRecord</span><span class="p">:(</span><span class="n">UIKeyCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
	<span class="c1">// Seu código aleatório aqui...
</span><span class="p">}</span>
</code></pre>
</div>

<p>Pronto! Agora seu app já reconhece o atalho <code class="highlighter-rouge">CMD + N</code> e chama o método de adicionar novo registro! Díficil né? Levou quanto tempo? 50 segundos?</p>

<h3 id="muito-legal-mas-como-o-usurio-fica-sabendo">Muito legal… Mas como o usuário fica sabendo?</h3>

<p>Ahá! Exatamente! Esse é o motivo porque os atalhos de teclado não eram muito comuns nos apps até recentemente.</p>

<p>No iOS 7 e no iOS 8, o desenvolvedor precisava criar hints e outras formas de ensinar ao usuário que ele podia usar atalhos de teclado na sua aplicação. Cada app fazia de uma forma diferente e o resultado era um usuário pouco propenso a adotar os atalhos no seu dia a dia.</p>

<p>Com o iOS 9 e as diversas funcionalidades focadas em produtividade, a Apple criou o <code class="highlighter-rouge">Discoverability</code>, que entre outras funções, exibe uma tela em overlay, mostrando os atalhos disponíveis. Basta manter a tecla <code class="highlighter-rouge">Command</code> pressionada enquanto um teclado externo estiver conectado.</p>

<p><img src="/img/dougfischer/overlay-shortcuts.jpeg" alt="" />
<span class="caption text-muted">Fica legal né?! ;-)</span></p>

<h3 id="faz-sucesso">Faz sucesso!</h3>

<p>Outro ponto legal de implementar essas funcionalidades, que não são primárias do app, mas que ajudam consideravelmente seus usuários mais ativos, é a relação que você constrói entre empresa e consumidor.</p>

<p>O Twitter está repleto de pessoas comemorando quando descobrem que algum app que eles gostam suporta atalhos desse tipo.</p>

<p>Essas reações colaboram muito com a divulgação do seu app nas redes sociais ou em matérias de blogs e afins. Até você mesmo pode divulgar isso como algum Easter Egg do seu produto! Tenho certeza que seu público vai gostar!</p>

<p>É isso. Agora é com você! Vai lá e implementa isso logo no seu app!</p>

<h3 id="referncias">Referências</h3>

<p>Links importantes:</p>

<ul>
  <li>
    <p><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKeyCommand_class/">Documentação Oficial da Apple</a></p>
  </li>
  <li>
    <p><a href="http://nshipster.com/uikeycommand/">Artigo do NSHipster sobre UIKeyCommand</a></p>
  </li>
</ul>

<p>Flw Vlw!</p>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/ios/2016/03/05/testes-de-aceitacao/" data-toggle="tooltip" data-placement="top" title="Testes de Aceitação em iOS">&larr; Post Anterior</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/storyboards/2016/03/06/desmistificando-storyboards/" data-toggle="tooltip" data-placement="top" title="Desmistificando Storyboards">Próximo Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- Disqus Content -->

                <div id="disqus_thread">
                    <script>
                        /**
                        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                        */
                        
                        /*
                        var disqus_config = function () {
                            this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
                            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                        };
                        */

                        (function() { // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');

                        s.src = '//nobre84.disqus.com/embed.js';

                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                </div>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/nobre84">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/nobre84">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/nobre84">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:nobre84@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted"><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Licença Creative Commons" style="border-width:0; display: inline;" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br />Este obra está licenciado com uma Licença <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Atribuição-NãoComercial 4.0 Internacional</a>.</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
